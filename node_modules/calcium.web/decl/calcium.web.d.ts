







declare module calcium.web {
    class App {
        public server: http.Server;
        public routers: any;
        public storage: calcium.storage.IDevice;
        constructor();
        public listen(port: number): void;
        private locate_route(request);
        private handler(request, response);
        private error404(request, response);
    }
}

declare module calcium.web {
    class Response {
        public headers: any;
        public body: string;
        public error: string;
        constructor();
        static from_response(response: http.ClientResponse, callback: (response: Response) => void): void;
    }
}


declare module calcium.web {
    class Request {
        public host: string;
        public hostname: string;
        public port: number;
        public auth: string;
        public path: string;
        public method: string;
        public headers: any;
        public agent: string;
        public protocol: string;
        public query: string;
        public hash: string;
        public postdata: string;
        constructor(url: string);
        public get(callback: (response: web.Response) => void): void;
        public post(postdata: string, callback: (response: web.Response) => void): void;
        public delete(postdata: string, callback: (response: web.Response) => void): void;
        public put(postdata: string, callback: (response: web.Response) => void): void;
        private request(callback);
    }
}

declare module calcium.web {
    class Route {
        public path: string;
        public method: string;
        public names: any;
        public regexp: RegExp;
        public callback: (context: web.Context) => void;
        constructor(path: string, method: string, callback: (context: web.Context) => void);
        public match(path: string): boolean;
        public parameter(path: string): any;
        private loadNames();
        private loadRegExp();
    }
}



declare module calcium.web {
    class Context {
        public server: http.Server;
        public request: http.ServerRequest;
        public response: http.ServerResponse;
        public router: web.Router;
        public route: web.Route;
        public storage: calcium.storage.IDevice;
        public parameters: any;
    }
}


declare module calcium.web {
    class Router {
        public routes: any;
        constructor();
        public match(method: string, path: string): web.Route;
        public get(path: string, callback: (context: web.Context) => void): void;
        public post(path: string, callback: (context: web.Context) => void): void;
        public put(path: string, callback: (context: web.Context) => void): void;
        public delete(path: string, callback: (context: web.Context) => void): void;
        public options(path: string, callback: (context: web.Context) => void): void;
    }
}






