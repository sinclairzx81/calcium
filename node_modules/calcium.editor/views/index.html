@{ this.layout = '/layout.html' } 

@section scripts() {

    <script type="text/javascript" src="/static/script/jquery/jquery-1.10.1.min.js"></script>
    
    <script type="text/javascript" src="/static/script/knockoutjs/knockout-2.2.1.js"></script>

    <script type="text/javascript" src="/static/script/linq/linq.min.js"></script>
    
    <script type="text/javascript" src="/static/script/calcium/calcium.api.js"></script>

    <script type="text/javascript" src="/static/script/calcium/calcium.models.js"></script>
    
    <script type="text/javascript">
        
        function PageModel()
        {
            this.tree = ko.observable( new FolderModel('root', '/') );

            this.tree().load();
        }

        function initialize() 
        {    
            ko.applyBindings( new PageModel() );
        }
        
        $(document).ready(function(){ initialize(); });
        
    </script>
}

@section sidebar() {
    
    <script type="text/html" id="template.folder">

        <div data-bind="if: expanded">

            <a href="#" data-bind="click: toggle"><i class="icon-chevron-down"></i><span data-bind="text:name"></span></a>     

        </div>

        <div data-bind="ifnot: expanded">
            
            <a href="#" data-bind="click: toggle"><i class="icon-chevron-right"></i><span data-bind="text:name"></span></a>     

        </div>  
              
        <div data-bind="if: expanded">

            <ul class="nav nav-list" data-bind="foreach: contents">
                
                <!-- ko if: type() == 'folder' -->

                    <li data-bind="template:{name:'template.folder', data:$data}" />
                
                <!-- /ko -->
                        
                <!-- ko if: type() == 'file' -->

                    <li data-bind="template:{name:'template.file', data:$data}" />

                <!-- /ko -->
            
            </ul>

        </div>

    </script>   

    <script type="text/html" id="template.file">
        <div>

         <a href="#"><i style="display:block; width:14px"></i><i class="icon-file"></i><span data-bind="text:name"></span></a>

       </div>

    </script>    

    <div class="well sidebar-nav">
        
        <ul class="nav nav-list" data-bind="foreach: tree().contents()">
            
            <!-- ko if: type() == 'folder' -->

                <li data-bind="template:{name:'template.folder', data:$data}" />
                
            <!-- /ko -->
                        
            <!-- ko if: type() == 'file' -->

                <li data-bind="template:{name:'template.file', data:$data}" />

            <!-- /ko -->
            
        </ul>

    </div>
}

@section content() {

    <input type="text" id="path" />

    <button class="btn" id="go">></button>

    <pre><code id="content">content here</code></pre>
}   