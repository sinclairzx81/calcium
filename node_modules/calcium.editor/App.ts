/// <reference path="decl/references.ts" />
/// <reference path="routers/ViewRouter.ts" />
/// <reference path="routers/StaticRouter.ts" />
/// <reference path="routers/StorageRouter.ts" />

module calcium.editor 
{    
    export class App extends calcium.web.App 
    {    
        public public_directory  : calcium.storage.Storage;

        public hub               : calcium.web.Hub;

        constructor(public storage : calcium.storage.Storage) 
        {            
            super();

            this.public_directory    = new calcium.storage.local.Storage({ basepath: __dirname + "/public" });

            this.routers.push( new calcium.editor.routers.StorageRouter ( '/storage', this.storage ) );

            this.routers.push( new calcium.editor.routers.ViewRouter    ( this.public_directory ) );

            this.routers.push( new calcium.editor.routers.StaticRouter  ( '/public', this.public_directory ) );
        }
    }
}