/// <reference path="decl/references.ts" />
/// <reference path="routers/ViewRouter.ts" />
/// <reference path="routers/StaticRouter.ts" />
/// <reference path="routers/StorageRouter.ts" />

module calcium.editor 
{    
    export class App extends calcium.web.App 
    {    
        public static_directory  : calcium.storage.Storage;

        public view_directory    : calcium.storage.Storage;

        public hub               : calcium.web.Hub;

        constructor(public storage : calcium.storage.Storage) 
        {            
            super();

            this.static_directory    = new calcium.storage.local.Storage({ basepath: __dirname + "/static" });

            this.view_directory      = new calcium.storage.local.Storage({ basepath: __dirname + "/views" });

            this.routers.push( new calcium.editor.routers.StorageRouter ( '/storage', this.storage ) );

            this.routers.push( new calcium.editor.routers.ViewRouter    ( this.view_directory ) );

            this.routers.push( new calcium.editor.routers.StaticRouter  ( '/static', this.static_directory ) );
        }
    }
}