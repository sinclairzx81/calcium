/// <reference path="decl/references.ts" />
/// <reference path="routers/Editor.ts" />
/// <reference path="routers/Storage.ts" />

module calcium.editor {
    
    export class App extends calcium.web.App {
        
        constructor(storage:calcium.storage.IDevice) {
                    
            super();

            var mount = new calcium.storage.mount.Device();
            
            mount.push("storage", storage);
            
            mount.push("static",  new calcium.storage.local.Device({ basepath: __dirname + "/static"}));
            
            mount.push("views",   new calcium.storage.local.Device({ basepath: __dirname + "/views"}));
            
            this.storage = mount;
            
            this.routers.push(new calcium.editor.routers.Editor());

            this.routers.push(new calcium.editor.routers.Storage());
        }
    }
}