var FileModel = function (name, path, mime) 
{
    this.type      = ko.observable('file');

    this.name      = ko.observable();
            
    this.path      = ko.observable();

    this.mime      = ko.observable();
}

var FolderModel = function(name, path) 
{    
    this.type     = ko.observable('folder');

    this.name     = ko.observable(name);

    this.path     = ko.observable(path);

    this.contents = ko.observableArray([]);            

    this.load = function()
    {   
        calcium.api.get("/storage" + this.path(), function(contents) 
        {
            for(var n in contents) 
            {
                switch(contents[n].type )
                {
                    case "file":
                            
                        var name = contents[n].name;

                        var path = contents[n].fullpath;

                        var mime = contents[n].mime;

                        this.contents().push(new FileModel(name, path, mime));

                        break;

                    case "folder":
                            
                        var name = contents[n].name;

                        var path = contents[n].fullpath;

                        this.contents().push(new FolderModel(name, path));

                        break;
                }
            }
        });
    }
}
      
  
 