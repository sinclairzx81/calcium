/// <reference path="../decl/references.ts" />

module calcium.editor.routers 
{
    export class ViewRouter extends calcium.web.Router 
    {
        constructor(public storage : calcium.storage.Storage)
        {
            super();
            
            this.get('/', (app) => { this.index(app);  });
        }

        public index(context:calcium.web.Context) : void 
        {
            calcium.template.storage = this.storage;

            calcium.template.render("/index.html", null, (content) => {
                
                context.response.writeHead(200, {'content-type' : 'text/html'});

                context.response.end(content);
            });
        }
    }
}